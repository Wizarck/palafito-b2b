!function(e){var r={};function o(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=r,o.d=function(e,r,n){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,r){if(1&r&&(e=o(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)o.d(n,t,function(r){return e[r]}.bind(null,t));return n},o.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(r,"a",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p="/",o(o.s=0)}([function(e,r,o){o(1),e.exports=o(2)},function(e,r){var o,n,t,d,i,a,c,u,s,l,f,_,m,g,p,v,b,h,y,j,k,w,x;o=jQuery,d=function(){n.find(".wc-order-refund-items > .wc-order-totals tbody").prepend('<tr><td colspan="2">'+vibe_merge_orders_data.refund_notice+"</td></tr>")},i=function(e){e.preventDefault(),u()},a=function(e){e.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},c=function(e){e.unblock()},u=function(){o(this).WCBackboneModal({template:"wc-modal-merge-orders"}),l()},s=function(e,r){"wc-modal-merge-orders"===r&&w()},l=function(){a(o("#modal-merge-orders-orders"));var e={action:"vibe_merge_orders_popup_orders",nonce:vibe_merge_orders_data.popup_nonce,order_id:o("button.merge-order").data("id")};o.get(vibe_merge_orders_data.ajaxurl,e,f)},f=function(e){var r=o("#modal-merge-orders-orders");c(r),e.success&&(r.html(e.html),_())},_=function(){(t=o("#merge-orders-popup")).length>0&&(t.find("#merge_order_select").selectWoo({ajax:{url:vibe_merge_orders_data.ajaxurl,method:"GET",dataType:"json",data:function(e){return{action:"vibe_merge_orders_get_orders",nonce:vibe_merge_orders_data.get_orders_nonce,search:e.term||"",page:e.page||1,amount:20,target_id:t.data("order-id")}}}}),g(),t.find("#merge_order_select").on("change",h),t.find("#merge_order_orders").on("change",m),t.find("button.add-order-to-merge").on("click",y))},m=function(e){g()},g=function(){t.find("#merge_order_orders").val()?v():p()},p=function(){o("#btn-ok").attr("disabled","disabled")},v=function(){o("#btn-ok").removeAttr("disabled")},b=function(e){t.prepend('<div class="notice notice-error"><p>'+e+"</p></div>")},h=function(e){t.find(".notice.notice-error").remove()},y=function(e){var r=t.find("#merge_order_select");if(r.val()){var o=r.selectWoo("data").shift();if(parseInt(o.id)!==parseInt(t.data("order-id"))){var n=t.find("#merge_order_orders"),d=n.val(),i=d?d.split("|"):[];i.includes(o.id)?b("You have already added this order to the merge"):(i.push(o.id),n.val(i.join("|")),n.trigger("change"),t.find("tbody").append(o.row_content),j(),r.val(null).trigger("change"))}else b("You cannot merge an order with itself")}else b("You must select an order to add")},j=function(){t.find(".remove-order-from-merge").off("click",k),t.find(".remove-order-from-merge").on("click",k)},k=function(e){e.preventDefault(),e.stopImmediatePropagation();var r=o(this).closest("tr"),n=r.data("order-id"),d=t.find("#merge_order_orders"),i=d.val(),a=i?i.split("|"):[],c=a.indexOf(n);c&&(a.splice(c,1),d.val(a.join("|")),d.trigger("change"),r.remove())},w=function(e){a(n);var r={action:"vibe_merge_orders_merge_order",nonce:vibe_merge_orders_data.merging_nonce,order_ids:t.find("#merge_order_orders").val(),target_id:t.data("order-id")};o.post(vibe_merge_orders_data.ajaxurl,r,x)},x=function(e){c(n),e.success&&window.location.reload()},o(function(){(n=o("#woocommerce-order-items")).length>0&&n.on("click","button.merge-order",i),o(document.body).on("wc_backbone_modal_response",s),parseInt(vibe_merge_orders_data.has_been_merged_into)&&d()})},function(e,r){}]);
//# sourceMappingURL=vibe-merge-orders.min.js.map